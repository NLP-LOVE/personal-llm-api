
# ğŸ†Personal LLM API

Personal LLM API æ˜¯ä¸€æ¬¾è½»é‡çº§çš„ LLM æ¥å£æœåŠ¡ï¼Œä¸ [one-api](https://github.com/songquanpeng/one-api) ç›¸æ¯”ï¼Œæœ¬é¡¹ç›®æ›´åŠ ç®€æ´æ˜“ç”¨ï¼Œä¸“ä¸ºä¸ªäººç”¨æˆ·æ‰“é€ ç»Ÿä¸€çš„ LLM æ¥å£ç®¡ç†æ–¹æ¡ˆã€‚åŸºäº Python å¼€å‘ï¼Œé‡‡ç”¨ FastAPI æ¡†æ¶å®ç°é«˜æ€§èƒ½æ¥å£æœåŠ¡ï¼Œåå°ç®¡ç†ç•Œé¢ä½¿ç”¨ amis ä½ä»£ç å¼€å‘ï¼Œæ— éœ€å¤æ‚çš„å‰ç«¯æŠ€æœ¯å³å¯å¿«é€Ÿæ„å»ºç®¡ç†æ§åˆ¶å°ã€‚

é¡¹ç›®ç‰¹ç‚¹ï¼š
- ğŸ§¿æç®€æ¶æ„ï¼šæ ¸å¿ƒä»£ç ç²¾ç®€ï¼Œæ˜“äºç†è§£å’Œéƒ¨ç½²
- ğŸPython åŸç”Ÿï¼šå…¨æ ˆ Python å®ç°ï¼Œé™ä½æŠ€æœ¯æ ˆå¤æ‚åº¦
- ğŸ“œä½ä»£ç åå°ç®¡ç†ï¼šåŸºäº [amis](https://aisuda.bce.baidu.com/amis/zh-CN/docs/index) æ„å»ºçš„ç®¡ç†ç•Œé¢ï¼Œå¯è§†åŒ–é…ç½®æ›´é«˜æ•ˆ
- ğŸ›é«˜åº¦å¯æ‰©å±•ï¼šåå°ç®¡ç†æ”¯æŒè½»æ¾æ·»åŠ æ–°çš„æ¨¡å‹æä¾›å•†å’Œæ¥å£ï¼›è½»æ¾æ‰©å±•å®šåˆ¶åŒ–ä»£ç ä¸åŠŸèƒ½ã€‚
- ğŸ‘©â€ğŸ’»ä¸ªäººå‹å¥½ï¼šèµ„æºå ç”¨ä½ï¼Œé€‚åˆä¸ªäººæœåŠ¡å™¨éƒ¨ç½²ï¼Œè¿è¡Œ Python å…¥å£æ–‡ä»¶å³å¯ã€‚
- ğŸ“±å¯æ­é…å„ç§ LLM å¯¹è¯å®¢æˆ·ç«¯ï¼šå¯ä¸ [Cherry studio](https://www.cherry-ai.com/) ã€[Lobe-Chat](https://lobechat.com/chat)ã€[ChatBox](https://chatboxai.app/zh/)ç­‰åº”ç”¨æ— ç¼é›†æˆï¼Œæ‰©å±•åº”ç”¨åœºæ™¯

æ”¯æŒå¤šç§ä¸»æµæ¨¡å‹æä¾›å•†ï¼ˆç«å±±äº‘ã€é˜¿é‡Œäº‘ã€ç¡…åŸºæµåŠ¨ã€OpenRouter ç­‰ï¼‰ï¼Œå…¼å®¹ OpenAI API è§„èŒƒï¼Œæä¾›æµå¼/éæµå¼å“åº”ã€Web æœç´¢(ç«å±±äº‘responseæ¥å£)é›†æˆç­‰æ ¸å¿ƒåŠŸèƒ½ï¼Œæ˜¯ä¸ªäººå¼€å‘è€…å¿«é€Ÿéƒ¨ç½²ç»Ÿä¸€ LLM æ¥å£çš„ç†æƒ³é€‰æ‹©ã€‚
        


## ç‰¹æ€§

- âœ…ï¸æ”¯æŒ `/v1/chat/completions`å’Œ`/chat/completions`çš„ OpenAI æ¥å£è§„èŒƒã€‚
- âœ…ï¸æ”¯æŒç«å±±äº‘`web search`çš„`response`æ¥å£è½¬æ¢æˆæ™®é€šçš„`chat`æ¥å£æ–¹å¼ï¼Œæ˜“äºæ¥å…¥`Cherry studio`ç­‰å®¢æˆ·ç«¯ã€‚
- âœ…ï¸æ”¯æŒ`Nano Banana Pro`ã€‚
- âœ…ï¸æ”¯æŒå¤§éƒ¨åˆ†çš„ LLM æœåŠ¡æä¾›å•†ã€‚
- âœ…ï¸æ”¯æŒç›¸åŒæ¨¡å‹ä¸‹çš„è½®è¯¢è´Ÿè½½å‡è¡¡ã€‚
- âœ…ï¸æ”¯æŒåå°ç®¡ç†ç•Œé¢(ä½¿ç”¨ç»Ÿè®¡ã€æ¨¡å‹ç®¡ç†ã€å¯¹è¯å†å²ã€key ç®¡ç†ç­‰)ã€‚
- âœ…ï¸æ”¯æŒ`sqlite`æˆ–`mysql`å­˜å‚¨ã€‚
- âœ…ï¸æ”¯æŒè®¾ç½®`proxy`ä»£ç†è®¿é—®ã€‚
- âœ…ï¸æ–¹ä¾¿ä¸ªäººä½¿ç”¨å’Œéƒ¨ç½²ï¼Œä¸æ”¯æŒå¤šç§Ÿæˆ·è®¾è®¡ã€‚
- âœ…ï¸åå°ç•Œé¢ä½¿ç”¨ [amis](https://aisuda.bce.baidu.com/amis/zh-CN/docs/index) ä½ä»£ç è¿›è¡Œæ„å»ºï¼Œæ–¹ä¾¿æ‰©å±•ã€‚
- ğŸ”²è®¡åˆ’å¼€å‘ä½¿ç”¨ [seekdb](https://www.oceanbase.ai/zh-CN/) AI åŸç”Ÿæ•°æ®åº“çš„ RAG åº”ç”¨åŠæ¥å£æœåŠ¡ã€‚



## æŠ€æœ¯æ ˆ

**å‰ç«¯:** amis-v6.13.0ã€TailwindCSS

**æœåŠ¡ç«¯:** FastAPI

**æ•°æ®åº“:** SQLiteã€MySQL


## Demo(åå°ç•Œé¢)

ğŸ§·[http://llmdashboard.demo.dx3906.info/dashboard/login#/api-manage](http://llmdashboard.demo.dx3906.info/dashboard/login#/api-manage)

ğŸ”‘ç™»å½•ç”¨æˆ·åå’Œå¯†ç ï¼š
```bash
test
12345678
```




## éƒ¨ç½²

é¡¹ç›®ç›®å½•è¯´æ˜
```bash
â”œâ”€â”€ app_config.yaml        # é¡¹ç›®é…ç½®æ–‡ä»¶
â”œâ”€â”€ config.py              # é…ç½®åŠ è½½æ¨¡å—
â”œâ”€â”€ init.py                # æ•°æ®åº“å’Œæ¨¡å‹åˆå§‹åŒ–
â”œâ”€â”€ main_personal_llm.py   # é¡¹ç›®å…¥å£æ–‡ä»¶
â”œâ”€â”€ requirements.txt       # é¡¹ç›®ä¾èµ–
â”œâ”€â”€ backend/               # åç«¯APIæ¨¡å—
â”‚   â”œâ”€â”€ api_manage.py      # APIç®¡ç†
â”‚   â”œâ”€â”€ backend_api.py     # åç«¯APIè·¯ç”±
â”‚   â”œâ”€â”€ chat.py            # èŠå¤©ç›¸å…³æ¥å£
â”‚   â””â”€â”€ llm_usage.py       # LLMä½¿ç”¨ç»Ÿè®¡
â”œâ”€â”€ dashboard/             # åå°ç®¡ç†ç•Œé¢
â”‚   â”œâ”€â”€ index.html         # ä¸»é¡µé¢
â”‚   â”œâ”€â”€ login.html         # ç™»å½•é¡µé¢
â”‚   â””â”€â”€ pages/             # é¡µé¢é…ç½®
â”œâ”€â”€ db/                    # æ•°æ®åº“ç›¸å…³
â”‚   â”œâ”€â”€ init_mysql.sql     # MySQLåˆå§‹åŒ–è„šæœ¬
â”‚   â”œâ”€â”€ init_sqlite.sql    # SQLiteåˆå§‹åŒ–è„šæœ¬
â”‚   â”œâ”€â”€ llm.db             # SQLiteæ•°æ®åº“æ–‡ä»¶
â”‚   â””â”€â”€ version            # ç‰ˆæœ¬
â”œâ”€â”€ logs/                  # æ—¥å¿—æ–‡ä»¶ç›®å½•
â”œâ”€â”€ service/               # LLMæœåŠ¡å®ç°
â”‚   â”œâ”€â”€ byte_llm.py        # å­—èŠ‚è·³åŠ¨LLMæœåŠ¡
â”‚   â”œâ”€â”€ llm_service.py     # åŸºç¡€LLMæœåŠ¡
â”‚   â”œâ”€â”€ open_router_llm.py # OpenRouter LLMæœåŠ¡
â”‚   â””â”€â”€ qwen_llm.py        # é˜¿é‡Œäº‘é€šä¹‰åƒé—®æœåŠ¡
â”œâ”€â”€ static/                # é™æ€èµ„æº
â””â”€â”€ utils/                 # å·¥å…·å‡½æ•°
    â”œâ”€â”€ db_client.py       # æ•°æ®åº“å®¢æˆ·ç«¯
    â”œâ”€â”€ logger.py          # æ—¥å¿—å·¥å…·
    â”œâ”€â”€ mysql_client.py    # MySQLå®¢æˆ·ç«¯
    â”œâ”€â”€ sqlite_client.py   # SQLiteå®¢æˆ·ç«¯
    â””â”€â”€ util.py            # é€šç”¨å·¥å…·
```

ğŸ‘‰ï¸1.æ‰€éœ€ Python ç‰ˆæœ¬ï¼š
```bash
pip install -r requirements.txt
```

ğŸ‘‰ï¸2.ä½¿ç”¨ pip å®‰è£…æ‰€éœ€ Python åŒ…ï¼š

```bash
pip install -r requirements.txt
```

ğŸ‘‰ï¸3.æ ¹æ®è‡ªå·±çš„ç¯å¢ƒï¼Œä¿®æ”¹é…ç½®æ–‡ä»¶`app_config.yaml`
```bash

# æ•°æ®åº“é…ç½®
database:
  # æ•°æ®åº“ç±»å‹ï¼Œå¯é€‰ sqlite \ mysql
  # - sqlite: ä½¿ç”¨ SQLite æ•°æ®åº“ï¼Œéœ€è¦æŒ‡å®š db_path
  # - mysql: ä½¿ç”¨ MySQL æ•°æ®åº“ï¼Œéœ€è¦æŒ‡å®š host, port, user, password, database
  use_db: sqlite

  sqlite:
    db_path: ./db/llm.db

  mysql:
    host: 127.0.0.1
    port: 3306
    user: root
    password: 123
    database: db

# ä»£ç†è®¾ç½®ï¼Œç”¨äºè®¿é—®å›½å¤–å¤§æ¨¡å‹æœåŠ¡
proxy:
  # ä»£ç†ç±»å‹ï¼Œå¯é€‰ system \ manual \ none
  # - system: ä½¿ç”¨ç³»ç»Ÿä»£ç†ï¼Œè‡ªåŠ¨è·å–æ“ä½œç³»ç»Ÿä»£ç†è®¾ç½®
  # - manual: æ‰‹åŠ¨é…ç½®ä»£ç†ï¼Œéœ€è¦æŒ‡å®š url
  # - none: ä¸ä½¿ç”¨ä»£ç†
  type: none
  url: http://127.0.0.1:7890

```

ğŸ‘‰ï¸4.è¿è¡Œ main å…¥å£ Python æ–‡ä»¶ï¼š
```bash
python3 main_personal_llm.py
```
æˆ–ï¼Œä½¿ç”¨åå°è¿è¡Œæ–¹å¼
```bash
nohup python3 main_personal_llm.py &
```

ğŸ‘‰ï¸5.ç„¶åé€šè¿‡æµè§ˆå™¨è®¿é—®ï¼š
```bash
http://127.0.0.1:2321/dashboard
```