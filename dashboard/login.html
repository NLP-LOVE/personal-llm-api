
<!DOCTYPE html>
<html dir="ltr">
    <head>
        <!-- Required meta tags -->
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <!-- Links Of CSS File -->
        <link rel="stylesheet" href="/static/login/css/remixicon.min.css">
        <link rel="stylesheet" href="/static/login/css/remixicon.css">
        <link rel="stylesheet" href="/static/login/css/apexcharts.css">
        <link rel="stylesheet" href="/static/login/css/simplebar.css">
        <link rel="stylesheet" href="/static/login/css/prism.min.css">
        <link rel="stylesheet" href="/static/login/css/jsvectormap.min.css">
        <link rel="stylesheet" href="/static/login/css/swiper-bundle.min.css">
        <link rel="stylesheet" href="/static/login/css/quill.snow.css">
        <link rel="stylesheet" href="/static/login/css/style.css">

        <!-- Favicon -->
		<link rel="icon" type="image/png" href="/static/images/favicon.png">

        <!-- Title -->
        <title>LLMåå°--ç™»å½•</title>

        <!-- Font Family -->
        <!-- Font Family -->
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="/static/login/css/google_font_css.css" rel="stylesheet">

        <!-- Material Icons -->
        <link rel="stylesheet" href="/static/login/css/google_font_material.css" />
    </head>
    <body>

        <!-- Light/Dark Mode Button -->
        <button type="button" class="light-dark-toggle leading-none inline-block transition-all text-[#fe7a36] absolute top-[20px] md:top-[25px] ltr:right-[20px] rtl:left-[20px] ltr:md:right-[25px] rtl:md:left-[25px]" id="light-dark-toggle">
            <i class="material-symbols-outlined !text-[20px] md:!text-[22px]">
                light_mode
            </i>
        </button>
        <!-- End Light/Dark Mode Button -->

        <!-- Sign In -->
        <div class="bg-white dark:bg-[#0a0e19] py-[60px] md:py-[80px] lg:py-[130px]" style="padding-bottom: 0px;">
            <div class="mx-auto px-[12.5px] md:max-w-[720px] lg:max-w-[960px] xl:max-w-[1255px]">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-[25px] items-center">
                    <div class="xl:ltr:-mr-[25px] xl:rtl:-ml-[25px] 2xl:ltr:-mr-[45px] 2xl:rtl:-ml-[45px] rounded-[25px] order-2 lg:order-1">
                        <img src="/static/images/sign-in.jpg" alt="sign-in-image" class="rounded-[20px]">
                    </div>
                    <div class="xl:ltr:pl-[90px] xl:rtl:pr-[90px] 2xl:ltr:pl-[120px] 2xl:rtl:pr-[120px] order-1 lg:order-2">
                        <img src="/static/images/white-logo-big.svg" alt="logo" class="hidden dark:inline-block">
                        <div class="my-[17px] md:my-[25px]">
                            <h1 class="!font-semibold !text-[22px] md:!text-xl lg:!text-2xl !mb-[5px] md:!mb-[7px] font-sans">
                                æ¬¢è¿æ¥åˆ° Personal LLM Dashboard Demoæ¼”ç¤º
                            </h1>
                            <p class="font-medium lg:text-md text-[#445164] dark:text-gray-400 font-sans">
                                ç›´æ¥å¡«å†™ç™»å½•ä¿¡æ¯ï¼Œè´¦å·ç¬¬ä¸€æ¬¡ç™»å½•åé‡æ–°è®¾ç½®æ–°å¯†ç ã€‚
                            </p>
                        </div>
                        <div class="mb-[15px] relative">
                            <label class="mb-[10px] md:mb-[12px] text-black dark:text-white font-medium block font-sans">
                                ç”¨æˆ·å
                            </label>
                            <input type="text" class="font-sans h-[55px] rounded-md text-black dark:text-white border border-gray-200 dark:border-[#172036] bg-white dark:bg-[#0c1427] px-[17px] block w-full outline-0 transition-all placeholder:text-gray-500 dark:placeholder:text-gray-400 focus:border-primary-500" autocomplete="username", placeholder="ä¾‹å¦‚ï¼štony" value="test">
                        </div>
                        <div class="mb-[15px] relative" id="passwordHideShow">
                            <label class="mb-[10px] md:mb-[12px] text-black dark:text-white font-medium block font-sans">
                                å¯†ç 
                            </label>
                            <input type="password" class="font-sans h-[55px] rounded-md text-black dark:text-white border border-gray-200 dark:border-[#172036] bg-white dark:bg-[#0c1427] px-[17px] block w-full outline-0 transition-all placeholder:text-gray-500 dark:placeholder:text-gray-400 focus:border-primary-500" id="password" placeholder="è‡³å°‘8ä½å¯†ç " autocomplete="current-password" value="12345678">
                            <button class="absolute text-lg ltr:right-[20px] rtl:left-[20px] bottom-[12px] transition-all hover:text-primary-500" id="toggleButton" type="button">
                                <i class="ri-eye-off-line"></i>
                            </button>
                        </div>
                        <button id="loginButton" type="submit" class="md:text-md block w-full text-center transition-all rounded-md font-medium mt-[20px] md:mt-[25px] py-[12px] px-[25px] text-white bg-primary-500 hover:bg-primary-400">
                            <span class="flex items-center justify-center gap-[5px]">
                                <i class="material-symbols-outlined">
                                    login
                                </i>
                                <span class="login-btn-text font-sans">ç™»å½•</span>
                            </span>
                        </button>
                        <p class="mt-[15px] md:mt-[20px] msg", style="color: #ff4000;">
                        </p>
                    </div>
                </div>
            </div>
        </div>
        <footer style="background-color: #f8f9fa; padding: 10px; text-align: center; margin-top: 10px;">
            <p style="color: #6c757d; font-size: 14px;">Version: 1.0 / Created by <a href="https://github.com/NLP-LOVE/personal-llm-api" target="_blank" style="font-color: #000000;">ğŸ±personal-llm-api</a></p>
        </footer>
        <!-- End Sign In -->
        
        <!-- Links Of JS File -->
        <script src="/static/login/js/apexcharts.min.js"></script>
        <script src="/static/login/js/fslightbox.js"></script>
        <script src="/static/login/js/simplebar.min.js"></script>
        <script src="/static/login/js/prism.min.js"></script>
        <script src="/static/login/js/swiper-bundle.min.js"></script>
        <script src="/static/login/js/jsvectormap.min.js"></script>
        <script src="/static/login/js/world-merc.js"></script>
        <script src="/static/login/js/quill.min.js"></script>
        <script src="/static/login/js/custom.js"></script>

        <!-- å®ç°ç™»å½•jsæäº¤æ“ä½œï¼Œå¹¶ä¸”æŠŠæäº¤é”™è¯¯çš„ç»“æœæ˜¾ç¤ºåœ¨msg å…ƒç´ å†…ï¼Œç™»å½•æˆåŠŸåæŠŠtokenä¿¡æ¯æ”¾åˆ°cookieå½“ä¸­ï¼Œå¹¶ä¸”è·³è½¬ -->
        <script>

            document.getElementById('loginButton').addEventListener('click', function() {
                const username = document.querySelector('input[type="text"]').value;
                const password = document.getElementById('password').value;
                const msgElement = document.querySelector('.msg');

                document.getElementsByClassName('login-btn-text')[0].innerHTML = 'ç™»å½•ä¸­...';
                document.getElementById('loginButton').disabled = true;

                // æ¨¡æ‹Ÿç™»å½•è¯·æ±‚
                fetch('/backend/login', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        username: username,
                        password: password
                    })
                })
                .then(response => {
                    if (!response.ok) {
                        throw new Error('ç™»å½•å¤±è´¥');
                    }
                    return response.json();
                })
                .then(data => {
                    if (data.status == 0) {
                        // æ£€æŸ¥æ˜¯å¦éœ€è¦é‡ç½®å¯†ç 
                        if (data.data.is_first_login == 1) {
                            // è·³è½¬åˆ°é‡ç½®å¯†ç é¡µé¢
                            window.location.href = '/dashboard/reset-password';
                            return;
                        }

                        // è·³è½¬åˆ°ç›®æ ‡é¡µé¢
                        //éšæœºç”Ÿæˆä¸€ä¸ªhashå€¼ï¼Œç„¶åè·³è½¬åˆ°ç›®æ ‡é¡µé¢
                        window.location.href = '/dashboard/#/llm-usage';
                    } else {
                        // æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
                        msgElement.textContent = data.msg || 'ç™»å½•å¤±è´¥ï¼Œè¯·é‡è¯•';
                        document.getElementsByClassName('login-btn-text')[0].innerHTML = 'ç™»å½•';
                        document.getElementById('loginButton').disabled = false;
                    }
                })
                .catch(error => {
                    // æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
                    msgElement.textContent = error.message || 'å‘ç”ŸæœªçŸ¥é”™è¯¯ï¼Œè¯·é‡è¯•';
                    document.getElementsByClassName('login-btn-text')[0].innerHTML = 'ç™»å½•';
                    document.getElementById('loginButton').disabled = false;
                });
            });
        </script>
    </body>
</html>